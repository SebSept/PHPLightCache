<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <title>PHP SimpleFileCache by SebSept</title>
  </head>

  <body>
    <header>
      <div class="inner">
        <h1>PHP SimpleFileCache</h1>
        <h2>Simple Files PHP Cache</h2>
        <a href="https://github.com/SebSept/SimpleFileCache" class="button"><small>View project on</small>GitHub</a>
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
          <h1>
<a name="php-simplefilecache" class="anchor" href="#php-simplefilecache"><span class="octicon octicon-link"></span></a>PHP SimpleFileCache</h1>

<p>This is a light weight file cache component for php. </p>

<h1>
<a name="features" class="anchor" href="#features"><span class="octicon octicon-link"></span></a>Features</h1>

<ul>
<li>Lightweight (~8Kb)</li>
<li>Simple to use (see API)</li>
<li>100% Unit tested</li>
<li>Optionnaly define expiration delay when retrieving content ( not when creating the cache )</li>
</ul><h1>
<a name="usage" class="anchor" href="#usage"><span class="octicon octicon-link"></span></a>Usage</h1>

<h2>
<a name="basic" class="anchor" href="#basic"><span class="octicon octicon-link"></span></a>Basic</h2>

<div class="highlight highlight-php"><pre><span class="o">&lt;?</span><span class="nx">php</span>
<span class="c1">// include file (using composer)</span>
<span class="k">require</span><span class="p">(</span><span class="s1">'vendor/autoload.php'</span><span class="p">);</span>

<span class="c1">// create an instance setting expiration delay (2 hours) and cache dir</span>
<span class="nv">$cache</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\SebSept\SimpleFileCache\Cache</span><span class="p">(</span>
<span class="k">array</span><span class="p">(</span>
    <span class="s1">'directoryPath'</span> <span class="o">=&gt;</span> <span class="s1">'/tmp/cacheFS'</span><span class="p">,</span>
    <span class="s1">'delay'</span> <span class="o">=&gt;</span> <span class="mi">60</span><span class="o">*</span><span class="mi">60</span><span class="o">*</span><span class="mi">2</span>
<span class="p">)</span>
<span class="p">);</span>

<span class="c1">// create a cache</span>
<span class="nv">$cache</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'theCacheId'</span><span class="p">,</span> <span class="s1">'This is some cached content, string'</span><span class="p">);</span>

<span class="c1">// get cached content</span>
<span class="nv">$content</span> <span class="o">=</span> <span class="nv">$cache</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">'theCacheId'</span><span class="p">);</span>

<span class="c1">// delete a cache</span>
<span class="nv">$cache</span><span class="o">-&gt;</span><span class="na">delete</span><span class="p">(</span><span class="s1">'theCacheId'</span><span class="p">);</span>
</pre></div>

<h2>
<a name="other-methods" class="anchor" href="#other-methods"><span class="octicon octicon-link"></span></a>Other methods</h2>

<div class="highlight highlight-php"><pre><span class="c1">// check that a cache with id 'theCacheId' exists and is less than an hour</span>
<span class="nv">$cache</span><span class="o">-&gt;</span><span class="na">exists</span><span class="p">(</span><span class="s1">'theCacheId'</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">'delay'</span> <span class="o">=&gt;</span> <span class="mi">60</span><span class="o">*</span><span class="mi">60</span><span class="p">));</span>

<span class="c1">// full path to file on disk</span>
<span class="nv">$pathToFile</span> <span class="o">=</span> <span class="nv">$cache</span><span class="o">-&gt;</span><span class="na">getFilePath</span><span class="p">(</span><span class="s1">'theCacheId'</span><span class="p">);</span>

<span class="c1">// path to base dir where cache files are</span>
<span class="nv">$cacheDirPath</span> <span class="o">=</span> <span class="nv">$cache</span><span class="o">-&gt;</span><span class="na">getDirectoryPath</span><span class="p">();</span>
</pre></div>

<div class="highlight highlight-php"><pre><span class="c1">// change path depth</span>
<span class="nv">$cache</span><span class="o">-&gt;</span><span class="na">setPathDepth</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span> <span class="c1">// files will be stored in /CacheDir/1/2/3/thecachename</span>

<span class="c1">// change cache directory</span>
<span class="nv">$cache</span><span class="o">-&gt;</span><span class="na">setDirectoryPath</span><span class="p">(</span><span class="s1">'/tmp/newdir'</span><span class="p">);</span> 
</pre></div>

<h1>
<a name="installation" class="anchor" href="#installation"><span class="octicon octicon-link"></span></a>Installation</h1>

<h2>
<a name="composer" class="anchor" href="#composer"><span class="octicon octicon-link"></span></a>Composer</h2>

<p>Add this to your <code>composer.json</code> :</p>

<div class="highlight highlight-json"><pre><span class="p">{</span>
    <span class="nt">"require"</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">"sebsept/cache"</span><span class="p">:</span> <span class="s2">"dev-master"</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>

<h2>
<a name="git" class="anchor" href="#git"><span class="octicon octicon-link"></span></a>Git</h2>

<div class="highlight highlight-bash"><pre>git clone https://github.com/SebSept/SimpleFileCache.git
</pre></div>

<h2>
<a name="direct-download" class="anchor" href="#direct-download"><span class="octicon octicon-link"></span></a>Direct download</h2>

<ul>
<li><a href="https://github.com/SebSept/SimpleFileCache/archive/master.zip">Download .zip</a></li>
<li><a href="https://github.com/SebSept/SimpleFileCache/archive/master.tar.gz">Download .tar.gz</a></li>
</ul><h1>
<a name="history" class="anchor" href="#history"><span class="octicon octicon-link"></span></a>History</h1>

<p>This is a fork of <a href="https://github.com/Gregwar/Cache">https://github.com/Gregwar/Cache</a> . 
I found and install Gregwar/Cache from composer but found a bug :
Expiration was not respected, so took a look at the code ... then decided to recode it all.</p>

<h1>
<a name="api" class="anchor" href="#api"><span class="octicon octicon-link"></span></a>API</h1>

<!-- inc -->

<div class="info">
    
    
    <strong>Namespace:</strong>SebSept\SimpleFileCache<br />
    

    <strong>Located at</strong><a href="source-class-SebSept.SimpleFileCache.Cache.html#13-317" title="Go to source code">Cache.php</a><br />
  </div>



  <table class="summary" id="methods">
  <caption>Methods summary</caption>
  <tr data-order="__construct" id="___construct">

    <td class="attributes"><code>
       public 
      
      
      </code>
    </td>

    <td class="name"><div>
    <a class="anchor" href="#___construct">#</a>
    <code>__construct( <span>array <var>$options</var> = []</span> )</code>


    <div class="description detailed">
      
<p>Constructs the cache system</p>

<p>Options param can be 'directoryPath' (string) and 'delay' <code><a href="class-SebSept.SimpleFileCache.Cache.html#$delay">SebSept\SimpleFileCache\Cache::<var>$delay</var></a></code></p>



        <h4>Parameters</h4>
        <div class="list"><dl>
          <dt><var>$options</var></dt>
          <dd><code>array</code><br>$options 'directoryPath', 'delay'</dd>
        </dl></div>





    </div>
    </div></td>
  </tr>
  <tr data-order="setDirectoryPath" id="_setDirectoryPath">

    <td class="attributes"><code>
       public 
      boolean
      
      </code>
    </td>

    <td class="name"><div>
    <a class="anchor" href="#_setDirectoryPath">#</a>
    <code>setDirectoryPath( <span>string <var>$directoryPath</var></span> )</code>

    <div class="description short">
      
<p>Set the cache directory (if exists)</p>

    </div>

    <div class="description detailed">
      
<p>Set the cache directory (if exists)</p>



        <h4>Parameters</h4>
        <div class="list"><dl>
          <dt><var>$directoryPath</var></dt>
          <dd><code>string</code><br>$directoryPath the cache directory. Without ending '/'</dd>
        </dl></div>

        <h4>Returns</h4>
        <div class="list">
          <code>boolean</code><br />
        </div>

        <h4>Throws</h4>
        <div class="list">
          <code><code><a href="class-Exception.html">Exception</a></code></code><br>Cache directory not existing or not writable<br />
        </div>



    </div>
    </div></td>
  </tr>
  <tr data-order="getDirectoryPath" id="_getDirectoryPath">

    <td class="attributes"><code>
       public 
      string
      
      </code>
    </td>

    <td class="name"><div>
    <a class="anchor" href="#_getDirectoryPath">#</a>
    <code>getDirectoryPath( )</code>

    <div class="description detailed">
      
<p>Get the cache directory</p>




        <h4>Returns</h4>
        <div class="list">
          <code>string</code><br>the cache directory<br />
        </div>




    </div>
    </div></td>
  </tr>
  <tr data-order="setPathDepth" id="_setPathDepth">

    <td class="attributes"><code>
       public 
      boolean
      
      </code>
    </td>

    <td class="name"><div>
    <a class="anchor" href="#_setPathDepth">#</a>
    <code>setPathDepth( <span>integer <var>$depth</var></span> )</code>



    <div class="description detailed">
      
<p>Set directories Path max depth</p>



        <h4>Parameters</h4>
        <div class="list"><dl>
          <dt><var>$depth</var></dt>
          <dd><code>integer</code><br>$depth path max depth</dd>
        </dl></div>

        <h4>Returns</h4>
        <div class="list">
          <code>boolean</code><br />
        </div>




    </div>
    </div></td>
  </tr>
  <tr data-order="getFilePath" id="_getFilePath">

    <td class="attributes"><code>
       public 
      string
      
      </code>
    </td>

    <td class="name"><div>
    <a class="anchor" href="#_getFilePath">#</a>
    <code>getFilePath( <span>string <var>$cacheId</var></span> )</code>



    <div class="description detailed">
      
<p>Get the cache file path</p>



        <h4>Parameters</h4>
        <div class="list"><dl>
          <dt><var>$cacheId</var></dt>
          <dd><code>string</code><br>$cacheId cache file name</dd>
        </dl></div>

        <h4>Returns</h4>
        <div class="list">
          <code>string</code><br>path to cache file<br />
        </div>




    </div>
    </div></td>
  </tr>
  <tr data-order="createCacheDir" id="_createCacheDir">

    <td class="attributes"><code>
       protected 
      boolean
      
      </code>
    </td>

    <td class="name"><div>
    <a class="anchor" href="#_createCacheDir">#</a>
    <code>createCacheDir( <span>string <var>$cachePath</var></span> )</code>

    <div class="description short">
      
<p>Create the directories where to create $cachePath</p>

    </div>

    <div class="description detailed">
      
<p>Create the directories where to create $cachePath</p>



        <h4>Parameters</h4>
        <div class="list"><dl>
          <dt><var>$cachePath</var></dt>
          <dd><code>string</code><br>$cachePath directory where to put file</dd>
        </dl></div>

        <h4>Returns</h4>
        <div class="list">
          <code>boolean</code><br />
        </div>




    </div>
    </div></td>
  </tr>
  <tr data-order="isExpired" id="_isExpired">

    <td class="attributes"><code>
       protected 
      boolean
      
      </code>
    </td>

    <td class="name"><div>
    <a class="anchor" href="#_isExpired">#</a>
    <code>isExpired( <span>string <var>$cacheFile</var></span>, <span>integer <var>$delay</var> = <span class="php-keyword1">null</span></span> )</code>

    <div class="description short">
      
<p>Cache is expired ?</p>

    </div>

    <div class="description detailed">
      
<p>Cache is expired ?</p>



        <h4>Parameters</h4>
        <div class="list"><dl>
          <dt><var>$cacheFile</var></dt>
          <dd><code>string</code><br>$cacheFile the cache file to check</dd>
          <dt><var>$delay</var></dt>
          <dd><code>integer</code><br>$delay, overrides current delay if set</dd>
        </dl></div>

        <h4>Returns</h4>
        <div class="list">
          <code>boolean</code><br />
        </div>




    </div>
    </div></td>
  </tr>
  <tr data-order="exists" id="_exists">

    <td class="attributes"><code>
       public 
      boolean
      
      </code>
    </td>

    <td class="name"><div>
    <a class="anchor" href="#_exists">#</a>
    <code>exists( <span>string <var>$cacheId</var></span>, <span>mixed <var>$delay</var> = <span class="php-keyword1">null</span></span> )</code>



    <div class="description detailed">
      
<p>Checks if cacheID exists with param delay or default delay</p>



        <h4>Parameters</h4>
        <div class="list"><dl>
          <dt><var>$cacheId</var></dt>
          <dd><code>string</code><br>$cacheId</dd>
          <dt><var>$delay</var></dt>
          <dd><code>mixed</code><br>null|int $delay</dd>
        </dl></div>

        <h4>Returns</h4>
        <div class="list">
          <code>boolean</code><br />
        </div>




    </div>
    </div></td>
  </tr>
  <tr data-order="set" id="_set">

    <td class="attributes"><code>
       public 
      boolean
      
      </code>
    </td>

    <td class="name"><div>
    <a class="anchor" href="#_set">#</a>
    <code>set( <span>string <var>$cacheId</var></span>, <span>string <var>$contents</var></span> )</code>



    <div class="description detailed">
      
<p>Caches contents</p>



        <h4>Parameters</h4>
        <div class="list"><dl>
          <dt><var>$cacheId</var></dt>
          <dd><code>string</code><br>$cacheId</dd>
          <dt><var>$contents</var></dt>
          <dd><code>string</code><br>$contents contents to cache</dd>
        </dl></div>

        <h4>Returns</h4>
        <div class="list">
          <code>boolean</code><br />
        </div>

        <h4>Throws</h4>
        <div class="list">
          <code><code><a href="class-Exception.html">Exception</a></code></code><br>if Failed to create file<br />
        </div>



    </div>
    </div></td>
  </tr>
  <tr data-order="get" id="_get">

    <td class="attributes"><code>
       public 
      mixed
      
      </code>
    </td>

    <td class="name"><div>
    <a class="anchor" href="#_get">#</a>
    <code>get( <span>string <var>$cacheId</var></span>, <span>integer <var>$delay</var> = <span class="php-keyword1">null</span></span> )</code>



    <div class="description detailed">
      
<p>Get data from the cache</p>



        <h4>Parameters</h4>
        <div class="list"><dl>
          <dt><var>$cacheId</var></dt>
          <dd><code>string</code><br>$cacheId</dd>
          <dt><var>$delay</var></dt>
          <dd><code>integer</code><br>$delay overrides defaults <code><a href="class-SebSept.SimpleFileCache.Cache.html#$delay">SebSept\SimpleFileCache\Cache::<var>$delay</var></a></code></dd>
        </dl></div>

        <h4>Returns</h4>
        <div class="list">
          <code>mixed</code><br>string|null null if cache doesn't exists in this conditions, string if exists<br />
        </div>




    </div>
    </div></td>
  </tr>
  <tr data-order="delete" id="_delete">

    <td class="attributes"><code>
       public 
      boolean
      
      </code>
    </td>

    <td class="name"><div>
    <a class="anchor" href="#_delete">#</a>
    <code>delete( <span>type <var>$cacheId</var></span> )</code>



    <div class="description detailed">
      
<p>Deletes cache</p>



        <h4>Parameters</h4>
        <div class="list"><dl>
          <dt><var>$cacheId</var></dt>
          <dd><code>type</code><br>$cacheID</dd>
        </dl></div>

        <h4>Returns</h4>
        <div class="list">
          <code>boolean</code><br />
        </div>

        <h4>Throws</h4>
        <div class="list">
          <code><code><a href="class-Exception.html">Exception</a></code></code><br>if failed to delete cache file<br />
        </div>



    </div>
    </div></td>
  </tr>
  <tr data-order="setDelay" id="_setDelay">

    <td class="attributes"><code>
       public 
      boolean
      
      </code>
    </td>

    <td class="name"><div>
    <a class="anchor" href="#_setDelay">#</a>
    <code>setDelay( <span>integer <var>$delay</var></span> )</code>

    <div class="description detailed">
      
<p>SetDelay</p>

<p>Set expiration delay. Return true if param value is an int or string castable
to int</p>



        <h4>Parameters</h4>
        <div class="list"><dl>
          <dt><var>$delay</var></dt>
          <dd><code>integer</code><br>$delay</dd>
        </dl></div>

        <h4>Returns</h4>
        <div class="list">
          <code>boolean</code><br />
        </div>




    </div>
    </div></td>
  </tr>
  <tr data-order="flush" id="_flush">

    <td class="attributes"><code>
       public 
      boolean
      
      </code>
    </td>

    <td class="name"><div>
    <a class="anchor" href="#_flush">#</a>
    <code>flush( )</code>

    <div class="description detailed">
      
<p>Flush all caches</p>

<p>Remove than recreate the cache directory</p>




        <h4>Returns</h4>
        <div class="list">
          <code>boolean</code><br />
        </div>

        <h4>Throws</h4>
        <div class="list">
          <code><code><a href="class-Exception.html">Exception</a></code></code><br>on failed to remove cache directory<br />
        </div>



    </div>
    </div></td>
  </tr>
  </table>








  <table class="summary" id="constants">
  <caption>Constants summary</caption>
  <tr data-order="CACHEID_VALIDATION_REGEXP" id="CACHEID_VALIDATION_REGEXP">

    <td class="attributes"><code>string</code></td>
    <td class="name"><code>
        <a href="source-class-SebSept.SimpleFileCache.Cache.html#48-51" title="Go to source code"><strong>CACHEID_VALIDATION_REGEXP</b></a>
    </code></td>
    <td class="value"><code><span class="php-quote">'|^[\w\d]{1,255}$|'</span></code></td>
    <td class="description"><div>
      <a href="#CACHEID_VALIDATION_REGEXP" class="anchor">#</a>

      <div class="description detailed">
        
<p>regular expression to validate cache ids</p>


      </div>
    </div></td>
  </tr>
  <tr data-order="DEPTH_MIN" id="DEPTH_MIN">

    <td class="attributes"><code>integer</code></td>
    <td class="name"><code>
        <strong>DEPTH_MIN</b>
    </code></td>
    <td class="value"><code><span class="php-num">0</span></code></td>
    <td class="description"><div>
      <a href="#DEPTH_MIN" class="anchor">#</a>

      <div class="description short">
        
<p>directory path minimal depth</p>

      </div>

      <div class="description detailed">
        
<p>directory path minimal depth</p>


      </div>
    </div></td>
  </tr>
  <tr data-order="DEPTH_MAX" id="DEPTH_MAX">

    <td class="attributes"><code>integer</code></td>
    <td class="name"><code>
        <a href="source-class-SebSept.SimpleFileCache.Cache.html#58-61" title="Go to source code"><strong>DEPTH_MAX</b></a>
    </code></td>
    <td class="value"><code><span class="php-num">12</span></code></td>
    <td class="description"><div>
      <a href="#DEPTH_MAX" class="anchor">#</a>

      <div class="description short">
        
<p>directory path minimal depth</p>

      </div>

      <div class="description detailed">
        
<p>directory path minimal depth</p>


      </div>
    </div></td>
  </tr>
  </table>




  <table class="summary" id="properties">
  <caption>Properties summary</caption>
  <tr data-order="directoryPath" id="$directoryPath">
    <td class="attributes"><code>
      protected  
      string
    </code></td>

    <td class="name">
        <a href="source-class-SebSept.SimpleFileCache.Cache.html#15-19" title="Go to source code"><var>$directoryPath</var></a>
    </td>
    <td class="value"><code></code></td>
    <td class="description"><div>
      <a href="#$directoryPath" class="anchor">#</a>

      <div class="description short">
        
<p>Cache directory</p>

      </div>

      <div class="description detailed">
        
<p>Cache directory</p>


      </div>
    </div></td>
  </tr>
  <tr data-order="pathDepth" id="$pathDepth">
    <td class="attributes"><code>
      protected  
      integer
    </code></td>

    <td class="name">
        <a href="source-class-SebSept.SimpleFileCache.Cache.html#21-30" title="Go to source code"><var>$pathDepth</var></a>
    </td>
    <td class="value"><code></code></td>
    <td class="description"><div>
      <a href="#$pathDepth" class="anchor">#</a>

      <div class="description short">
        
<p>directories max depth</p>

      </div>

      <div class="description detailed">
        
<p>directories max depth</p>

<p>set in __construct with $options['pathDepth'] For instance, if the file is
helloworld.txt and the depth size is 5, the cache file will be:
h/e/l/l/o/helloworld.txt</p>


      </div>
    </div></td>
  </tr>
  <tr data-order="options" id="$options">
    <td class="attributes"><code>
      protected  
      array
    </code></td>

    <td class="name">
        <a href="source-class-SebSept.SimpleFileCache.Cache.html#32-38" title="Go to source code"><var>$options</var></a>
    </td>
    <td class="value"><code>[<span class="php-quote">'directoryPath'</span> =&gt; <span class="php-quote">'cache'</span>,
                      <span class="php-quote">'delay'</span> =&gt; <span class="php-num">86400</span>,
                      <span class="php-quote">'pathDepth'</span> =&gt; <span class="php-num">5</span>]</code></td>
    <td class="description"><div>
      <a href="#$options" class="anchor">#</a>

      <div class="description short">
        
<p>default configuration options</p>

      </div>

      <div class="description detailed">
        
<p>default configuration options</p>


      </div>
    </div></td>
  </tr>
  <tr data-order="delay" id="$delay">
    <td class="attributes"><code>
      protected  
      integer
    </code></td>

    <td class="name">
        <a href="source-class-SebSept.SimpleFileCache.Cache.html#40-46" title="Go to source code"><var>$delay</var></a>
    </td>
    <td class="value"><code></code></td>
    <td class="description"><div>
      <a href="#$delay" class="anchor">#</a>

      <div class="description short">
        
<p>cache delay</p>

      </div>

      <div class="description detailed">
        
<p>cache delay</p>

<p>set in __construct with $options['delay']</p>


      </div>
    </div></td>
  </tr>
  </table>





<!-- fin inc -->

<h1>
<a name="license" class="anchor" href="#license"><span class="octicon octicon-link"></span></a>License</h1>

<p>Published under <a href="./LICENSE">The MIT License (MIT)</a>.</p>
        </section>

        <aside id="sidebar">
          <a href="https://github.com/SebSept/SimpleFileCache/zipball/master" class="button">
            <small>Download</small>
            .zip file
          </a>
          <a href="https://github.com/SebSept/SimpleFileCache/tarball/master" class="button">
            <small>Download</small>
            .tar.gz file
          </a>

          <p class="repo-owner"><a href="https://github.com/SebSept/SimpleFileCache"></a> is maintained by <a href="https://github.com/SebSept">SebSept</a>.</p>

          <p>This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the Architect theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.</p>
        </aside>
      </div>
    </div>

  
  </body>
</html>